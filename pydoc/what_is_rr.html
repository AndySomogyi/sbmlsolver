<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>What is RoadRunner &mdash; RoadRunner 0.99 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.99',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="RoadRunner 0.99 documentation" href="index.html" />
    <link rel="up" title="Introduction" href="introduction.html" />
    <link rel="next" title="Installing RoadRunner" href="installing_rr.html" />
    <link rel="prev" title="What Is SBML?" href="what_is_sbml.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="installing_rr.html" title="Installing RoadRunner"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="what_is_sbml.html" title="What Is SBML?"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">RoadRunner 0.99 documentation</a> &raquo;</li>
          <li><a href="introduction.html" accesskey="U">Introduction</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="what-is-roadrunner">
<h1>What is RoadRunner<a class="headerlink" href="#what-is-roadrunner" title="Permalink to this headline">Â¶</a></h1>
<p>RoadRunner is package for loading, JIT compilation, simulation and
analysis of SBML systems biology models.</p>
<p>The roadrunner package contains two fundametal objects, <cite>RoadRunner</cite>
and <cite>ExecutableModel</cite>. <cite>RoadRunner</cite> is the typically the top level object,
it is responsible for orchestrating all of the internal components
such as model loading, JIT compilation, integration and output.</p>
<p>** roadrunner overview</p>
<dl class="docutils">
<dt>** ExecutalbeModel</dt>
<dd><ul class="first last simple">
<li>represetns a compiled sbml model</li>
<li>properties to get and set any state variables.</li>
</ul>
</dd>
</dl>
<p>I&#8217;ve got much of the new Python API working, its very clean simple interface that uses all native Python objects. All the returned types are Numpy arrays. Much of the time, the Numpy array just holds a pointer to a block of data owned by RoadRunner, for example, the
array returned by simulate just has a pointer to the results matrix which is owned by RoadRunner, so there is NO COPYING involved. If you have no need for the result, just ignore it, it costs virtually nothing to return it.</p>
<p>So, here is a simple example:</p>
<p>The new API is really cool, this is all you have to do:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">RoadRunner</span> <span class="kn">as</span> <span class="nn">rr</span>
<span class="kn">import</span> <span class="nn">pylab</span> <span class="kn">as</span> <span class="nn">p</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">rr</span><span class="o">.</span><span class="n">RoadRunner</span><span class="p">()</span>
</pre></div>
</div>
<p>this takes an optional LoadSBMLOptions class as a second parameter:</p>
<div class="highlight-python"><pre>In Windows

r loadSBMLFromFile("C:\MyModels\mymodel.xml")

or on the Mac or Linux

r.loadSBMLFromFile("/home/foo/myfile.xml")</pre>
</div>
<p>this takes an optional SimulateOptions class as a second parameter.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">s</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">simulate</span><span class="p">()</span>
</pre></div>
</div>
<p>Hi,</p>
<p>Here is a transcript of an interactive ipython session:</p>
<div class="highlight-python"><pre>import RoadRunner as rr
rr?
Type:       module
String Form:&lt;module 'RoadRunner' from 'RoadRunner.pyc'&gt;
File:       /Users/andy/.local/lib/Python/RoadRunner.py
Docstring:
The RoadRunner SBML Simulation Engine,
(c) 2009-2013 Herbert Sauro, Andy Somogyi and Totte Karlsson

rr.RoadRunner?
Type:       type
String Form:&lt;class 'RoadRunner.RoadRunner'&gt;
File:       /Users/andy/.local/lib/Python/RoadRunner.py
Docstring:
The main RoadRunner class.</pre>
</div>
<p>All three of the RoadRunner options default to the empty string, in this
case, the default values are used.</p>
<p>usual import stuff:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">roadrunner</span> <span class="kn">as</span> <span class="nn">rr</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">n</span>
<span class="kn">import</span> <span class="nn">numpy.linalg</span> <span class="kn">as</span> <span class="nn">lin</span>
</pre></div>
</div>
<p>make a RoadRunner and load a doc:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">r</span> <span class="o">=</span> <span class="n">rr</span><span class="o">.</span><span class="n">RoadRunner</span><span class="p">()</span>
<span class="n">r</span><span class="o">.</span><span class="n">loadSBMLFromFile</span><span class="p">(</span><span class="s">&quot;/Users/andy/src/sbml_test/cases/semantic/00110/00110-sbml-l3v1.xml&quot;</span><span class="p">)</span>
<span class="bp">True</span>
</pre></div>
</div>
<p>get the model, the model obj has all the accessors sbml elements names / values:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">m</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">getModel</span><span class="p">()</span>
</pre></div>
</div>
<p>use the build in RR function to get the Jacobian, notice this is returned as a native
numpy matrix:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">jac</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">getFullJacobian</span><span class="p">()</span>
</pre></div>
</div>
<p>display it:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">jac</span>
<span class="n">array</span><span class="p">([[</span> <span class="mf">0.75</span><span class="p">,</span>  <span class="mf">0.5</span> <span class="p">,</span>  <span class="mf">0.25</span><span class="p">],</span>
<span class="p">[</span><span class="o">-</span><span class="mf">0.75</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.75</span><span class="p">,</span>  <span class="mf">0.</span>  <span class="p">],</span>
<span class="p">[</span> <span class="mf">0.</span>  <span class="p">,</span>  <span class="mf">0.25</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.25</span><span class="p">]])</span>
</pre></div>
</div>
<p>get a vector of floating species amounts:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">amt</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">getFloatingSpeciesAmounts</span><span class="p">()</span>
</pre></div>
</div>
<p>dsplay it:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">amt</span>
<span class="n">array</span><span class="p">([</span> <span class="mf">1.</span><span class="p">,</span>  <span class="mf">1.</span><span class="p">,</span>  <span class="mf">0.</span><span class="p">])</span>
</pre></div>
</div>
<p>look at the floating species ids:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">m</span><span class="o">.</span><span class="n">getFloatingSpeciesIds</span><span class="p">()</span>
<span class="p">[</span><span class="s">&#39;S1&#39;</span><span class="p">,</span> <span class="s">&#39;S2&#39;</span><span class="p">,</span> <span class="s">&#39;S3&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>numpy has a huge amount of numeric capability, here we calculate
the eigensystem from the Jacobian.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">lin</span><span class="o">.</span><span class="n">eig</span><span class="p">(</span><span class="n">jac</span><span class="p">)</span>
<span class="p">(</span><span class="n">array</span><span class="p">([</span> <span class="o">-</span><span class="mf">5.75693909e-01</span><span class="p">,</span>   <span class="mf">3.25693909e-01</span><span class="p">,</span>  <span class="o">-</span><span class="mf">8.55019192e-17</span><span class="p">]),</span>
<span class="n">array</span><span class="p">([[</span><span class="o">-</span><span class="mf">0.18130286</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.79611302</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.57735027</span><span class="p">],</span>
     <span class="p">[</span> <span class="mf">0.78010553</span><span class="p">,</span>  <span class="mf">0.55506939</span><span class="p">,</span>  <span class="mf">0.57735027</span><span class="p">],</span>
     <span class="p">[</span><span class="o">-</span><span class="mf">0.59880267</span><span class="p">,</span>  <span class="mf">0.24104363</span><span class="p">,</span>  <span class="mf">0.57735027</span><span class="p">]]))</span>
</pre></div>
</div>
<p>suppose we wanted to calculate the matrix vector product of the jacobian with the
floating species amounts, its a single statement now that we use native types.:</p>
<div class="highlight-python"><pre>n.dot(jac, amt)
Out[13]: array([ 1.25, -1.5 ,  0.25])</pre>
</div>
<p>first column in result is time, rest are whatever is selected.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">p</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">s</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">s</span><span class="p">[:,</span><span class="mi">1</span><span class="p">:])</span>
</pre></div>
</div>
<p>stored in two Python lists, <tt class="docutils literal"><span class="pre">a</span></tt> and <tt class="docutils literal"><span class="pre">b</span></tt>, we could iterate over
each element:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">c</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">)):</span>
    <span class="n">c</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
</pre></div>
</div>
<p>This produces the correct answer, but if <tt class="docutils literal"><span class="pre">a</span></tt> and <tt class="docutils literal"><span class="pre">b</span></tt> each contain</p>
<p>and initializations, memory allocation, etc.)</p>
<div class="highlight-python"><pre>for (i = 0; i &lt; rows; i++): {
  c[i] = a[i]*b[i];
}</pre>
</div>
<p>This saves all the overhead involved in interpreting the Python code
and manipulating Python objects, but at the expense of the benefits
gained from coding in Python.  Furthermore, the coding work required
increases with the dimensionality of our data. In the case of a 2-D
array, for example, the C code (abridged as before) expands to</p>
<div class="highlight-python"><pre>for (i = 0; i &lt; rows; i++): {
  for (j = 0; j &lt; columns; j++): {
    c[i][j] = a[i][j]*b[i][j];
  }
}</pre>
</div>
<p>NumPy gives us the best of both worlds: element-by-element operations
are the &#8220;default mode&#8221; when an <cite>ndarray</cite> is involved, but the
element-by-element operation is speedily executed by pre-compiled C
code.  In NumPy</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">c</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span>
</pre></div>
</div>
<p>does what the earlier examples do, at near-C speeds, but with the code
simplicity we expect from something based on Python (indeed, the NumPy</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="what_is_sbml.html"
                        title="previous chapter">What Is SBML?</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="installing_rr.html"
                        title="next chapter">Installing RoadRunner</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/what_is_rr.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="installing_rr.html" title="Installing RoadRunner"
             >next</a> |</li>
        <li class="right" >
          <a href="what_is_sbml.html" title="What Is SBML?"
             >previous</a> |</li>
        <li><a href="index.html">RoadRunner 0.99 documentation</a> &raquo;</li>
          <li><a href="introduction.html" >Introduction</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Andy Somogyi, Herbert Suaro.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b2.
    </div>
  </body>
</html>