\hypertarget{__Variant_8h_source}{}\doxysection{\+\_\+\+Variant.\+h}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/*}}
\DoxyCodeLine{2 \textcolor{comment}{ * Variant.h}}
\DoxyCodeLine{3 \textcolor{comment}{ *}}
\DoxyCodeLine{4 \textcolor{comment}{ *  Created on: Apr 26, 2014}}
\DoxyCodeLine{5 \textcolor{comment}{ *      Author: andy}}
\DoxyCodeLine{6 \textcolor{comment}{ */}}
\DoxyCodeLine{7 }
\DoxyCodeLine{8 \textcolor{preprocessor}{\#ifndef VARIANT\_H\_}}
\DoxyCodeLine{9 \textcolor{preprocessor}{\#define VARIANT\_H\_}}
\DoxyCodeLine{10 }
\DoxyCodeLine{11 \textcolor{preprocessor}{\#include "{}rrExporter.h"{}}}
\DoxyCodeLine{12 \textcolor{preprocessor}{\#include <typeinfo>}}
\DoxyCodeLine{13 \textcolor{preprocessor}{\#include <string>}}
\DoxyCodeLine{14 \textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{15 }
\DoxyCodeLine{16 }
\DoxyCodeLine{17 \textcolor{keyword}{namespace }rr}
\DoxyCodeLine{18 \{}
\DoxyCodeLine{19 }
\DoxyCodeLine{74 \textcolor{keyword}{class }RR\_DECLSPEC \mbox{\hyperlink{classrr_1_1Variant}{Variant}}}
\DoxyCodeLine{75 \{}
\DoxyCodeLine{76 \textcolor{keyword}{public}:}
\DoxyCodeLine{77 }
\DoxyCodeLine{81     \textcolor{keyword}{enum} \mbox{\hyperlink{classrr_1_1Variant_a64c7b2189f8d391527919e46a72402a8}{TypeId}}}
\DoxyCodeLine{82     \{}
\DoxyCodeLine{83         STRING, BOOL, INT32, UINT32, INT64, UINT64, FLOAT, DOUBLE, CHAR, UCHAR, EMPTY, DOUBLEVECTOR}
\DoxyCodeLine{84     \};}
\DoxyCodeLine{85 }
\DoxyCodeLine{89     TypeId type() \textcolor{keyword}{const};}
\DoxyCodeLine{90 }
\DoxyCodeLine{94     \mbox{\hyperlink{classrr_1_1Variant}{Variant}}();}
\DoxyCodeLine{95 }
\DoxyCodeLine{104     \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{105     \mbox{\hyperlink{classrr_1_1Variant_a81b0ca7e57d1985f2e05ef7f0805b1cf}{Variant}}(\textcolor{keyword}{const} T\& val) : self(0)}
\DoxyCodeLine{106     \{}
\DoxyCodeLine{107         \textcolor{keyword}{const} std::type\_info \&info = \textcolor{keyword}{typeid}(T);}
\DoxyCodeLine{108         alloc();}
\DoxyCodeLine{109         assign(info, \&val);}
\DoxyCodeLine{110     \}}
\DoxyCodeLine{111 }
\DoxyCodeLine{112     \mbox{\hyperlink{classrr_1_1Variant}{Variant}}(\textcolor{keyword}{const} \textcolor{keywordtype}{char}* str) : self(0)}
\DoxyCodeLine{113     \{}
\DoxyCodeLine{114         \textcolor{keyword}{const} std::type\_info \&info = \textcolor{keyword}{typeid}(std::string);}
\DoxyCodeLine{115         std::string val(str);}
\DoxyCodeLine{116         alloc();}
\DoxyCodeLine{117         assign(info, \&val);}
\DoxyCodeLine{118     \}}
\DoxyCodeLine{119 }
\DoxyCodeLine{123     Variant(\textcolor{keyword}{const} Variant\& other);}
\DoxyCodeLine{124 }
\DoxyCodeLine{130     \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{131     \mbox{\hyperlink{classrr_1_1Variant}{Variant}}\& operator = (\textcolor{keyword}{const} T\& value)}
\DoxyCodeLine{132     \{}
\DoxyCodeLine{133         \textcolor{keyword}{const} std::type\_info \&info = \textcolor{keyword}{typeid}(T);}
\DoxyCodeLine{134         assign(info, \&value);}
\DoxyCodeLine{135         \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{136     \}}
\DoxyCodeLine{137 }
\DoxyCodeLine{141     \mbox{\hyperlink{classrr_1_1Variant}{Variant}}\& operator = (\textcolor{keyword}{const} \mbox{\hyperlink{classrr_1_1Variant}{Variant}}\& other);}
\DoxyCodeLine{142 }
\DoxyCodeLine{146     \textcolor{keyword}{virtual} \mbox{\hyperlink{classrr_1_1Variant}{\string~Variant}}();}
\DoxyCodeLine{147 }
\DoxyCodeLine{163     \textcolor{keyword}{const} std::type\_info\& typeInfo() \textcolor{keyword}{const};}
\DoxyCodeLine{164 }
\DoxyCodeLine{177     \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{178     T \mbox{\hyperlink{classrr_1_1Variant_a7bb371be936601754f61d5285f834352}{convert}}()\textcolor{keyword}{ const}}
\DoxyCodeLine{179 \textcolor{keyword}{    }\{}
\DoxyCodeLine{180         T value;}
\DoxyCodeLine{181         convert\_to(\textcolor{keyword}{typeid}(T), \&value);}
\DoxyCodeLine{182         \textcolor{keywordflow}{return} value;}
\DoxyCodeLine{183     \}}
\DoxyCodeLine{184 }
\DoxyCodeLine{190 \textcolor{preprocessor}{    \#define VARIANT\_IMPLICIT\_CONVERT(type)   \(\backslash\)}}
\DoxyCodeLine{191 \textcolor{preprocessor}{    operator type() const                    \(\backslash\)}}
\DoxyCodeLine{192 \textcolor{preprocessor}{    \{                                        \(\backslash\)}}
\DoxyCodeLine{193 \textcolor{preprocessor}{        return convert<type>();              \(\backslash\)}}
\DoxyCodeLine{194 \textcolor{preprocessor}{    \}}}
\DoxyCodeLine{195 }
\DoxyCodeLine{196     VARIANT\_IMPLICIT\_CONVERT(std::string);}
\DoxyCodeLine{197 }
\DoxyCodeLine{198     VARIANT\_IMPLICIT\_CONVERT(\textcolor{keywordtype}{long});}
\DoxyCodeLine{199 }
\DoxyCodeLine{200     VARIANT\_IMPLICIT\_CONVERT(\textcolor{keywordtype}{bool});}
\DoxyCodeLine{201 }
\DoxyCodeLine{202     VARIANT\_IMPLICIT\_CONVERT(\textcolor{keywordtype}{float});}
\DoxyCodeLine{203 }
\DoxyCodeLine{204     VARIANT\_IMPLICIT\_CONVERT(\textcolor{keywordtype}{double});}
\DoxyCodeLine{205 }
\DoxyCodeLine{206     VARIANT\_IMPLICIT\_CONVERT(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long});}
\DoxyCodeLine{207 }
\DoxyCodeLine{208     VARIANT\_IMPLICIT\_CONVERT(\textcolor{keywordtype}{int});}
\DoxyCodeLine{209 }
\DoxyCodeLine{210     VARIANT\_IMPLICIT\_CONVERT(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int});}
\DoxyCodeLine{211 }
\DoxyCodeLine{212     VARIANT\_IMPLICIT\_CONVERT(\textcolor{keywordtype}{char});}
\DoxyCodeLine{213 }
\DoxyCodeLine{214     VARIANT\_IMPLICIT\_CONVERT(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char});}
\DoxyCodeLine{215 }
\DoxyCodeLine{216     VARIANT\_IMPLICIT\_CONVERT(std::vector<double>);}
\DoxyCodeLine{217     }
\DoxyCodeLine{225     \textcolor{keyword}{static} \mbox{\hyperlink{classrr_1_1Variant}{Variant}} parse(\textcolor{keyword}{const} std::string\& val);}
\DoxyCodeLine{226 }
\DoxyCodeLine{230     std::string toString() \textcolor{keyword}{const};}
\DoxyCodeLine{231 }
\DoxyCodeLine{236     std::string pythonRepr() \textcolor{keyword}{const};}
\DoxyCodeLine{237 }
\DoxyCodeLine{241     \textcolor{keywordtype}{bool} isString() \textcolor{keyword}{const};}
\DoxyCodeLine{242 }
\DoxyCodeLine{246     \textcolor{keywordtype}{bool} isInteger() \textcolor{keyword}{const};}
\DoxyCodeLine{247 }
\DoxyCodeLine{251     \textcolor{keywordtype}{bool} isNumeric() \textcolor{keyword}{const};}
\DoxyCodeLine{252 }
\DoxyCodeLine{256     \textcolor{keywordtype}{bool} isBool() \textcolor{keyword}{const};}
\DoxyCodeLine{257 }
\DoxyCodeLine{261     \textcolor{keywordtype}{bool} isEmpty() \textcolor{keyword}{const};}
\DoxyCodeLine{262 }
\DoxyCodeLine{266     \textcolor{keywordtype}{bool} isSigned() \textcolor{keyword}{const};}
\DoxyCodeLine{267 }
\DoxyCodeLine{268     \textcolor{comment}{/*}}
\DoxyCodeLine{269 \textcolor{comment}{    * true if this is a std::vector of doubles}}
\DoxyCodeLine{270 \textcolor{comment}{    * */}}
\DoxyCodeLine{271     \textcolor{keywordtype}{bool} isDoubleVector() \textcolor{keyword}{const};}
\DoxyCodeLine{272 }
\DoxyCodeLine{273 \textcolor{keyword}{private}:}
\DoxyCodeLine{279     \textcolor{keyword}{struct }\mbox{\hyperlink{structrr_1_1VariantImpl}{VariantImpl}} *self;}
\DoxyCodeLine{280     \textcolor{comment}{/*}}
\DoxyCodeLine{281 \textcolor{comment}{    * Allocates this Variant's VariantImpl on the free store}}
\DoxyCodeLine{282 \textcolor{comment}{    */}}
\DoxyCodeLine{283     \textcolor{keywordtype}{void} alloc();}
\DoxyCodeLine{284     \textcolor{comment}{/*}}
\DoxyCodeLine{285 \textcolor{comment}{    * Assigns this variant object to the value pointed to by value}}
\DoxyCodeLine{286 \textcolor{comment}{    * of the type specified by info}}
\DoxyCodeLine{287 \textcolor{comment}{    *}}
\DoxyCodeLine{288 \textcolor{comment}{    * Pre: value must point to valid data for the type specified by info}}
\DoxyCodeLine{289 \textcolor{comment}{    *}}
\DoxyCodeLine{290 \textcolor{comment}{    * Throws std::invalid\_argument if the type specified by info is not}}
\DoxyCodeLine{291 \textcolor{comment}{    * supported by rr::Variant}}
\DoxyCodeLine{292 \textcolor{comment}{    */}}
\DoxyCodeLine{293     \textcolor{keywordtype}{void} assign(\textcolor{keyword}{const} std::type\_info\& info, \textcolor{keyword}{const} \textcolor{keywordtype}{void}* value);}
\DoxyCodeLine{294     \textcolor{comment}{/*}}
\DoxyCodeLine{295 \textcolor{comment}{    * Converts this variant object to the type specified by info and puts}}
\DoxyCodeLine{296 \textcolor{comment}{    * the result at value.}}
\DoxyCodeLine{297 \textcolor{comment}{    *}}
\DoxyCodeLine{298 \textcolor{comment}{    * Pre: the type specified by info is supported by rr::Variant}}
\DoxyCodeLine{299 \textcolor{comment}{    *}}
\DoxyCodeLine{300 \textcolor{comment}{    * Performs type coercions supported by Poco::Dynamic::Var (https://pocoproject.org/docs/Poco.Dynamic.Var.html)}}
\DoxyCodeLine{301 \textcolor{comment}{    *}}
\DoxyCodeLine{302 \textcolor{comment}{    * Throws std::invalid\_argument if the type given is not supported by rr:Variant}}
\DoxyCodeLine{303 \textcolor{comment}{    * }}
\DoxyCodeLine{304 \textcolor{comment}{    * Throws std::logic\_error if the conversion cannot be performed}}
\DoxyCodeLine{305 \textcolor{comment}{    */}}
\DoxyCodeLine{306     \textcolor{keywordtype}{void} convert\_to(\textcolor{keyword}{const} std::type\_info\& info, \textcolor{keywordtype}{void}* value) \textcolor{keyword}{const};}
\DoxyCodeLine{307 \};}
\DoxyCodeLine{308 }
\DoxyCodeLine{309 \} \textcolor{comment}{/* namespace rr */}}
\DoxyCodeLine{310 }
\DoxyCodeLine{311 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* VARIANT\_H\_ */}\textcolor{preprocessor}{}}

\end{DoxyCode}
