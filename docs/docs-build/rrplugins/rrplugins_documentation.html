

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>rrPlugins Documentation &mdash; libRoadRunner 1.1.16 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Python RoadRunner API Reference" href="../PythonAPIReference/api_reference.html" />
    <link rel="prev" title="Accessing the SBML Model Variables" href="../accessing_model.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> libRoadRunner
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">RoadRunner Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Installation/installation.html">Installing RoadRunner</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../read_write_functions.html">SBML Read/Write Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../selecting_values.html">Selecting Values</a></li>
<li class="toctree-l1"><a class="reference internal" href="../steady_state.html">Steady State Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stochastic.html">Stochastic Simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../metabolic.html">Metabolic Control Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stability.html">Stability Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stoichiometric.html">Stoichiometric Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bifurcation.html">Bifurcation Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../simulation_and_integration.html">Simulation and Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utility_functions.html">Utility Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../accessing_model.html">Accessing the SBML Model Variables</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">rrPlugins Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#the-basic-philosophy-behind-the-design-of-the-new-architecture-of-rrplugins-as-compared-to-the-old-one">The basic philosophy behind the design of the new architecture of rrplugins as compared to the old one</a></li>
<li class="toctree-l2"><a class="reference internal" href="#extending-support-to-c-and-other-languages">Extending support to C and other languages</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-to-write-a-new-plugin-and-use-it-in-python">How to write a new plugin and use it in Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="#current-issues">Current issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="#scope-of-improvements">Scope of Improvements</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../PythonAPIReference/api_reference.html">Python RoadRunner API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../C%2B%2BAPIReference/index.html">The LibRoadRunner C++ Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developers_docs/index.html">Developers Documentation</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">libRoadRunner</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>rrPlugins Documentation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/rrplugins/rrplugins_documentation.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="rrplugins-documentation">
<h1>rrPlugins Documentation<a class="headerlink" href="#rrplugins-documentation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="the-basic-philosophy-behind-the-design-of-the-new-architecture-of-rrplugins-as-compared-to-the-old-one">
<h2>The basic philosophy behind the design of the new architecture of rrplugins as compared to the old one<a class="headerlink" href="#the-basic-philosophy-behind-the-design-of-the-new-architecture-of-rrplugins-as-compared-to-the-old-one" title="Permalink to this headline">¶</a></h2>
<p>Let’s first discuss what is the problem with the <a class="reference external" href="https://github.com/sys-bio/rrplugins/">old architecture</a> of rrplugins . Earlier roadrunner and rrplugins were separate entities. To build rrplugins first we need to build roadrunner then rrplugins using the libraries of libRoadRunner. In short rrplugins is dependent on roadrunner, so any change in roadrunner will need to rebuild the plugins. Also, there are two separate installations. So the primary objective was <strong>any change in roadrunner will not affect plugins and any change in plugins will not affect roadrunner.</strong></p>
<p>To do so instead of using roadrunner libraries directly we used roadrunner C API (Why C API because unless we change C API the user of the API will have no impact on the project). So if we change roadrunner and the API remains the same then we have no need to rebuild rrplugins.</p>
<p><strong>Let’s dive into the broad implementation details</strong></p>
<p>Plugins are using the structure which consists of function pointers pointing towards C API functions of the roadrunner. This <a class="reference external" href="https://github.com/sys-bio/PluginSystemExample">approach</a> is devised from the mentor Dr. Herbert. We are using this because if we change libRoadRunner then plugins need to be rebuilt. But following this case, there will be no such requirements.</p>
<p>Every plugin requires certain classes to be used. For example, cpp plugins require this <a class="reference external" href="https://github.com/sys-bio/rrplugins/blob/master/rrplugins/core/telCPPPlugin.h">file</a>. Earlier this used to be a part of rrplugins core (plugin loader). Now since plugins need (classes) this and the plugin loader is dependent on roadrunner we can’t use plugin loader as a dependency. So we split the plugin loader into two parts:</p>
<ul class="simple">
<li><p><strong>Core</strong> It consists of a minimal plugin loader</p></li>
<li><p><strong>Plugin Base Class</strong> It has all the base class require for plugins</p></li>
</ul>
<p>Now plugins are dependent on Base classes only not the part which requires roadrunner as a dependency. So, a change in roadrunner will have no impact on plugins.</p>
<p>To use roadrunner functionalities, the structure that consists of function pointers pointing towards C API functions of the roadrunner is used. Whenever a plugin loads, the plugin manager passes a pointer to the structure, so that plugin can access the roadrunner functionality using the function pointer.</p>
<p><strong>A block diagram describing the interaction is given below</strong></p>
<img alt="../_images/rrplugins_block_diagram.png" src="../_images/rrplugins_block_diagram.png" />
</div>
<div class="section" id="extending-support-to-c-and-other-languages">
<h2>Extending support to C and other languages<a class="headerlink" href="#extending-support-to-c-and-other-languages" title="Permalink to this headline">¶</a></h2>
<p>We can currently build plugins in C++ only. We can make plugins in any language which supports interaction with C++, <strong>provided we need to make a separate API for them.</strong> Let’s consider an example of C language. There is a C API already present so we can use it to make plugins. <strong>But here is a catch.</strong> Currently, the C API we have is dependent on the roadrunner. This means using that to build plugins will generate plugins that need to be rebuilt if roadrunner is changed. Now the big question is how to overcome this. To overcome this we can make API in such a way that we use only those functions which are not dependent on roadrunner. That is a way to achieve the task.</p>
</div>
<div class="section" id="how-to-write-a-new-plugin-and-use-it-in-python">
<h2>How to write a new plugin and use it in Python<a class="headerlink" href="#how-to-write-a-new-plugin-and-use-it-in-python" title="Permalink to this headline">¶</a></h2>
<p>A minimal example to make a plugin is given in this <a class="reference external" href="https://github.com/sys-bio/roadrunner/tree/develop/rrplugins/plugins/hello_roadrunner">link</a>. And for python consider this <a class="reference external" href="https://github.com/sys-bio/roadrunner/blob/develop/rrplugins/plugins/hello_roadrunner/docs/hello_roadrunner_example.py">python code</a>. This is a minimal example and the complexity can be increased based on the need, but, the functions used here are necessary and need to be used for every plugin.</p>
</div>
<div class="section" id="current-issues">
<h2>Current issues<a class="headerlink" href="#current-issues" title="Permalink to this headline">¶</a></h2>
<p>We can’t skip the parameters for minimization i.e. if we have 3 parameters S1, S2, and S3 <strong>in the model</strong> and we need to minimize based on S1 and S3, we can’t do that. It is due to a problem in <a class="reference external" href="https://github.com/sys-bio/roadrunner/blob/develop/rrplugins/plugins/levenberg_marquardt/lmWorker.cpp#L518">function</a>.</p>
<p>So in general if we have parameters S1, S2, S3,…..Sn we can use parameter S1, S2,…Si (prefix) only where 1&lt;=i&lt;=n only.</p>
</div>
<div class="section" id="scope-of-improvements">
<h2>Scope of Improvements<a class="headerlink" href="#scope-of-improvements" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>At present to use any functionality of libRoadRunner we do it with roadrunner C API. But the problem with that is it converts roadrunner data types which are in C++ to C data types and then using pointers we reference that and again convert C to C++. It is a time-consuming process. Instead, we could use void pointers and send and then cast to appropriate data types on the side of the plugin.  This will significantly boost the performance.</p></li>
<li><p>A very long-term merging rrplugins python wrapper which is in CPython with SWIG. It will be a very tough task. It’s super hard to debug code if something has gone wrong. I tried it but failed to merge and to be honest there is no present need for this and it can be delayed.</p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../PythonAPIReference/api_reference.html" class="btn btn-neutral float-right" title="Python RoadRunner API Reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../accessing_model.html" class="btn btn-neutral float-left" title="Accessing the SBML Model Variables" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2013-2018, Andy Somogyi, J Kyle Medley, Kiri Choi, Herbert Suaro.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>